10 ' ***** BLOCK BREAKER *****
20 CLEAR255,&HC000:COLOR15,1,1:SCREEN1,2,0:WIDTH32:KEYOFF:DEFINT A-U:DEFUSR=&H7E:A=USR(0)
30 BX=120:BY=160:BR=6:BV=-1:BS=4:AX=0:AY=0:PX=120:PV=0:SC=0:B=3:DIM VX(7),VY(7),BK$(4):FOR I=0 TO 6:READ VX(I),VY(I):NEXT
35 BK$(0)="bd":BK$(1)="ce":BK$(2)="fh":BK$(3)="fh"
40 GOSUB 5000
50 ' ***** TITLE *****
60 GOSUB 800:GOSUB 900:GOSUB 1000
70 ' ***** GAME INIT *****
80 BX=128:BY=160:BR=5:BV=-1:BS=6:AX=0:AY=0:PX=120:PV=0:SC=0:B=3:GOSUB700
100 ' ***** GAME MAIN *****
110 ' PLAYER CONTROL
120 S=STICK(0):PV=PV-((S=7)*(PV>-12))+((S=3)*(PV<12)):PX=PX+PV*2:IFPX>248THENPX=248:PV=0ELSEIFPX<8THENPX=8:PV=0
200 ' BALL MOVE & HIT CHECK
210 AX=(BX+(VX(BR)*BS))\8:AY=(BY+(VY(BR)*BV*BS))\8:AD=&HC000+INT(AX\2)+(AY*16):DT=PEEK(AD):IFDT=0THENGOTO300
220 ' REFRECTION
230 IFDT=255THENGOTO280
240 IFPEEK(&HC000+((BX+VX(BR)*BS)\16)+(BY\8)*16)>0THENBR=3-(BR-3)
242 IFPEEK(&HC000+(BX\16)+((BY+VY(BR)*BV*BS)\8)*16)>0THENBV=BV*-1
244 POKE(AD),0:LOCATE(AX\2)*2,AY:PRINT"  ";:PLAY"T180S9m1000O4B8":SC=SC+1:GOSUB800:BS=6+(SC\20) 
270 GOTO300
280 IF((BX<16)+(BX>239))THENBR=3-(BR-3):PLAY"T180S9M1000O6E8":IFBX<16THENBX=16ELSEBX=239
290 IFBY<8THENBV=BV*-1:BY=8:PLAY"T180S9m1000O6E8":GOTO410
300 IFBY>177ANDBV=1ANDABS(BX-PX)<7THENBV=BV*-1:PLAY"T180S9m1000O5E8":IFABS(PV)>2THENBR=BR+SGN(PV):IFBR<0THENBR=0ELSEIFBR>6THENBR=6:GOTO410
400 IFBY>184THENBV=BV*-1' MISS
410 BX=BX+VX(BR)*BS:BY=BY+VY(BR)*BV*BS:GOSUB900:GOTO100
700 ' ***** MEMORY INIT & FIELD DRAW *****
710 FORI=0TO22:FORJ=0TO15:AD=&HC000+I*16+J:IFI=0ORJ=0ORJ=15THEND=255ELSEIFI>1ANDI<9THEND=1ELSED=0
760 POKEAD,D:LOCATEJ*2,I:IFD=255THENPRINT"aa";ELSEIFD=1THENPRINTBK$((I-2)\2);
770 NEXTJ,I:RETURN
800 ' ***** PRINT INFORMATION *****
810 LOCATE0,0:PRINT USING "SCORE:#####0";SC:LOCATE 26,0:PRINT USING"BALL:#";B:RETURN
900 ' ***** PUT BALL & PADDLE *****
910 PUT SPRITE0,(BX-4,BY-4),13,0
920 PUT SPRITE1,(PX-8,180),15,1
930 RETURN
1000 ' ***** TITLE *****
1010 LOCATE 9,9:PRINT"BLOCK BREAKER"
1020 LOCATE 9,14:PRINT"PUSH SPACE KEY"
1030 IF STRIG(0)=0 GOTO 1030
1040 LOCATE 9,9:PRINT SPACE$(13):LOCATE 9,14:PRINT SPACE$(14)
1050 RETURN
5000 ' ***** CHARACTER INIT *****
5010 FOR I=0 TO 1:L$="":R$="":FOR J=0 TO 15:READ A$:L$=L$+CHR$(VAL("&B"+LEFT$(A$,8))):R$=R$+CHR$(VAL("&B"+RIGHT$(A$,8))):NEXT J:SPRITE$(I)=L$+R$:NEXT I
5020 READ CH:IF CH=999 THEN RETURN
5030 READ DT$,CL$:FOR I=0 TO 7
5040 AD=CH*8+I:D=VAL("&H"+MID$(DT$,I*2+1,2)):C=VAL("&H"+MID$(CL$,I*2+1,2))
5050 VPOKE AD,D:VPOKE &H800+AD,D:VPOKE &H1000+AD,D
5060 VPOKE &H2000+AD,C:VPOKE &H2800+AD,C:VPOKE &H3000+AD,C:NEXT I
5070 GOTO 5020
6000 ' ***** BALL MOVE DATA *****
6010 DATA 0.9, 0.4, 0.7, 0.7, 0.4, 0.9, 0, 1, -0.4, 0.9, -0.7, 0.7, -0.9, 0.4
6100 ' ***** BALL *****
6110 DATA 0000000000000000
6120 DATA 0001100000000000
6130 DATA 0010110000000000
6140 DATA 0101111000000000
6150 DATA 0111111000000000
6160 DATA 0011110000000000
6170 DATA 0001100000000000
6180 DATA 0000000000000000
6190 DATA 0000000000000000
6200 DATA 0000000000000000
6210 DATA 0000000000000000
6220 DATA 0000000000000000
6230 DATA 0000000000000000
6240 DATA 0000000000000000
6250 DATA 0000000000000000
6260 DATA 0000000000000000
6300 ' ***** PADDLE *****
6310 DATA 0010000000000100
6320 DATA 0101111111111010
6330 DATA 1011111111111101
6340 DATA 1011111111111101
6350 DATA 1011111111111101
6360 DATA 1010000000000101
6370 DATA 0101111111111010
6380 DATA 0010000000000100
6390 DATA 0000000000000000
6400 DATA 0000000000000000
6410 DATA 0000000000000000
6420 DATA 0000000000000000
6430 DATA 0000000000000000
6440 DATA 0000000000000000
6450 DATA 0000000000000000
6460 DATA 0000000000000000
10000 ' ***** PCG CHARACTER *****
10010 DATA 097,EFEFEF00FEFEFE00,8686868686868686
10020 DATA 098,FFABDFBFFFFFFF00,5457575754545454
10030 DATA 099,FFABDFBFFFFFFF00,2C2323232C2C2C2C
10040 DATA 100,FEFEFEFEFCFAD400,5454545454545454
10050 DATA 101,FEFEFEFEFCFAD400,2C2C2C2C2C2C2C2C
10060 DATA 102,FFABDFBFFFFFFF00,BABFBFBFBABABABA
10070 DATA 103,0000689898680870,F1F1F1F1F1F1F1F1
10080 DATA 104,FEFEFEFEFCFAD400,BABABABABABABABA
10090 DATA 999
