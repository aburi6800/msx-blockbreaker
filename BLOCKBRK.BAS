10 ' ***** BLOCK BREAKER *****
20 SCREEN1,2,0:WIDTH32:KEYOFF:COLOR15,1,1
30 DEFINT A-U:CLEAR255,&HC000:GOSUB 10000:GOSUB 10050
40 BX=120:BY=160:BR=5:BV=-1:BS=8:AX=0:AY=0:PX=120:PV=0:SC=0:B=3
45 GOSUB 800:GOSUB 900
50 ' ***** TITLE *****
60 GOSUB 1000
70 ' ***** GAME INIT *****
80 GOSUB700:GOSUB750:GOSUB800
90 BX=128:BY=160:BR=5:BV=-1:BS=8:AX=0:AY=0:PX=120:PV=0:SC=0:B=3
100 ' ***** GAME MAIN *****
110 ' PLAYER CONTROL
120 S=STICK(0):PV=PV-((S=7)*(PV>-12))+((S=3)*(PV<12)):PX=PX+PV*2:IFPX>248THENPX=248:PV=0ELSEIFPX<8THENPX=8:PV=0
200 ' BALL MOVE & HIT CHECK
210 AX=(BX+(VX(R)*BS))\16:AY=(BY\8)*16:AD=&HC000+AX+AY:DT=PEEK(AD):IFDT=0THENGOTO230
220 IFDT=1THENPOKE(AD),0:LOCATEAX*2,BY\8:PRINT"  ":SC=SC+1:GOSUB800:BR=3-(BR-3)ELSEBR=3-(BR-3)
225 GOTO 300
230 AX=BX\16:AY=((BY+(VY(R)*BV*BS))\8)*16:AD=&HC000+AX+AY:DT=PEEK(AD):IFDT=0THENGOTO300
240 IFDT=1THENPOKE(AD),0:LOCATEAX*2,(BY+(VY(R)*BV*BS))\8:PRINT"  ":SC=SC+1:GOSUB800:BV=BV*-1ELSEBV=BV*-1
300 IFBY<170ORBV=-1THENGOTO410
310 IFABS(BX-PX)<9THENBV=BV*-1:IFABS(PV)>3THENBR=BR-SGN(PV):IFBR<0THENBR=0ELSEIFBR>6THENBR=6
400 IFBY>184THENBV=BV*-1' MISS
410 BX=BX+(VX(BR)*BS):BY=BY+(VY(BR)*BV*BS):GOSUB900:GOTO100
700 ' ***** MEMORY INIT *****
710 FORI=0TO22:FORJ=0TO15:AD=&HC000+I*16+J:IFI=0ORJ=0ORJ=15THENPOKEAD,255ELSEIFI>1ANDI<9THENPOKEAD,1ELSEPOKEAD,0
720 NEXTJ,I:RETURN
750 ' ***** FIELD DRAW *****
760 FORI=0TO22:FORJ=0TO15:V=PEEK(&HC000+I*16+J):LOCATEJ*2,I:IFV=255THENPRINT"##";ELSEIFV=1THENPRINT"[]";
770 NEXTJ,I:RETURN
800 ' ***** PRINT INFORMATION *****
810 LOCATE0,0:PRINT USING "SCORE:#####0";SC:LOCATE 26,0:PRINT USING"BALL:#";B:RETURN
900 ' ***** PUT BALL & PADDLE *****
910 PUT SPRITE0,(BX-4,BY-4),13,0
920 PUT SPRITE1,(PX-8,176),15,1
930 RETURN
1000 ' ***** TITLE *****
1010 LOCATE 9,9:PRINT"BLOCK BREAKER"
1020 LOCATE 9,14:PRINT"PUSH SPACE KEY"
1030 IF STRIG(0)=0 GOTO 1030
1040 LOCATE 9,9:PRINT SPACE$(13):LOCATE 9,14:PRINT SPACE$(14)
1050 RETURN
10000 ' ***** CHARACTER INIT *****
10010 FOR I=0 TO 1:L$="":R$="":FOR J=0 TO 15:READ A$:L$=L$+CHR$(VAL("&B"+LEFT$(A$,8))):R$=R$+CHR$(VAL("&B"+RIGHT$(A$,8))):NEXT J:SPRITE$(I)=L$+R$:NEXT I:RETURN
10050 ' ***** BALL MOVE DATA INIT *****
10060 DIM VX(7),VY(7):FOR I=0 TO 6:READ VX(I),VY(I):NEXT:RETURN
10100 ' ***** BALL *****
10110 DATA 0000000000000000
10120 DATA 0001100000000000
10130 DATA 0010110000000000
10140 DATA 0101111000000000
10150 DATA 0111111000000000
10160 DATA 0011110000000000
10170 DATA 0001100000000000
10180 DATA 0000000000000000
10190 DATA 0000000000000000
10200 DATA 0000000000000000
10210 DATA 0000000000000000
10220 DATA 0000000000000000
10230 DATA 0000000000000000
10240 DATA 0000000000000000
10250 DATA 0000000000000000
10260 DATA 0000000000000000
10300 ' ***** PADDLE *****
10310 DATA 0010000000000100
10320 DATA 0101111111111010
10330 DATA 1011111111111101
10340 DATA 1011111111111101
10350 DATA 1011111111111101
10360 DATA 1010000000000101
10370 DATA 0101111111111010
10380 DATA 0010000000000100
10390 DATA 0000000000000000
10400 DATA 0000000000000000
10410 DATA 0000000000000000
10420 DATA 0000000000000000
10430 DATA 0000000000000000
10440 DATA 0000000000000000
10450 DATA 0000000000000000
10460 DATA 0000000000000000
11000 ' ***** BALL MOVE DATA *****
11010 DATA 0.9, 0.4, 0.7, 0.7, 0.4, 0.9, 0, 1, -0.4, 0.9, -0.7, 0.7, -0.9, 0.4
